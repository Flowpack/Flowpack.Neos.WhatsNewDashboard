"use strict";(()=>{var W=Object.create;var u=Object.defineProperty;var S=Object.getOwnPropertyDescriptor;var j=Object.getOwnPropertyNames;var E=Object.getPrototypeOf,P=Object.prototype.hasOwnProperty;var D=(e,t)=>()=>(e&&(t=e(e=0)),t);var m=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var I=(e,t,s,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of j(t))!P.call(e,n)&&n!==s&&u(e,n,{get:()=>t[n],enumerable:!(a=S(t,n))||a.enumerable});return e};var d=(e,t,s)=>(s=e!=null?W(E(e)):{},I(t||!e||!e.__esModule?u(s,"default",{value:e,enumerable:!0}):s,e));function i(e){return(...t)=>{if(window["@Neos:HostPluginAPI"]&&window["@Neos:HostPluginAPI"][`@${e}`])return window["@Neos:HostPluginAPI"][`@${e}`](...t);throw new Error("You are trying to read from a consumer api that hasn't been initialized yet!")}}var f=D(()=>{});var y=m((ne,w)=>{f();w.exports=i("vendor")().React});var N=m((ae,b)=>{f();b.exports=i("NeosProjectPackages")().ReactUiComponents});f();var g=i("manifest");var r=d(y()),l=d(N()),T=()=>{let[e,t]=(0,r.useState)(!1),[s,a]=(0,r.useState)(0),n=async()=>{try{let c=await(await fetch("/api/whats-new/in-project")).json();a(c.clientNotificationTimestamp)}catch(o){console.error("Error fetching API data:",o)}};(0,r.useEffect)(()=>{n()},[]),(0,r.useEffect)(()=>{if(!s)return;let o=Object.fromEntries(document.cookie.split("; ").map(O=>O.split("="))),c=o.whatsNewNoteClosedTimestamp?parseInt(o.whatsNewNoteClosedTimestamp):0,x=Date.now();(!c||c<s&&x>s)&&t(!0)},[s]);let p=()=>{let o=new Date;o.setFullYear(o.getFullYear()+5),document.cookie=`whatsNewNoteClosedTimestamp=${Date.now()}; expires=${o.toUTCString()}; path=/`,t(!1)},C=()=>r.default.createElement(l.Button,{id:"neos-DiscardDialog-Cancel",key:"cancel",style:"lighter",hoverStyle:"brand",onClick:p},"Close"),_=o=>{o.preventDefault(),p(),setTimeout(()=>{window.location.href=`${window.location.origin}/neos/whats-new/in-project`},100)};return e?r.default.createElement(r.default.Fragment,null,r.default.createElement(l.Dialog,{isOpen:e,title:"New features",actions:[C()],type:"success",className:"whats-new__dialog"},r.default.createElement("div",{className:"dialog__content"},r.default.createElement("p",null,"There are new features available in your project."),r.default.createElement("p",null,"You can check the ",r.default.createElement("strong",null,"What's new > in project section")," in the menu for more details."),r.default.createElement("p",null,r.default.createElement("a",{href:"#",onClick:_},"Go to 'Whats new in your project'"))))):null},A=r.default.memo(T);g("Flowpack.Neos.WhatsNewDashboard:whatsNewNotificationModal",{},e=>{e.get("containers").set("Modals/WhatsNewNotificationModal",A)});})();
//# sourceMappingURL=BackendModal.js.map
